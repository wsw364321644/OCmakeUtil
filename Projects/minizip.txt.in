cmake_minimum_required(VERSION 3.24)
include(ExternalProject)
set(OCMAKEUTIL_PROJECTS_PATH @OCMAKEUTIL_PROJECTS_PATH@)
set(CMAKE_PREFIX_PATH @CMAKE_PREFIX_PATH@)
set(CMAKE_MODULE_PATH @CMAKE_MODULE_PATH@)
set(IMPORT_PROJECT_STATIC_CRT @IMPORT_PROJECT_STATIC_CRT@)
set(IMPORT_PROJECT_STATIC @IMPORT_PROJECT_STATIC@)

if(IMPORT_PROJECT_STATIC_CRT)
  set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")
else()
  set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>DLL")
endif()

if(IMPORT_PROJECT_STATIC)
  set(BUILD_SHARED_LIBS OFF)
else()
  set(BUILD_SHARED_LIBS ON)
endif()

project(project_minizip)

ExternalProject_Add(minizip
  GIT_REPOSITORY @GIT_REPOSITORY@
  GIT_TAG @MINIZIP_TAG@
  CMAKE_ARGS
  -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
  CMAKE_CACHE_ARGS
  -DCMAKE_PREFIX_PATH:STRING=${CMAKE_PREFIX_PATH}
  -DCMAKE_POLICY_DEFAULT_CMP0091:STRING=NEW
  -DCMAKE_MSVC_RUNTIME_LIBRARY:STRING=${CMAKE_MSVC_RUNTIME_LIBRARY}
  -DBUILD_SHARED_LIBS:BOOL=${BUILD_SHARED_LIBS}
  -DZLIB_USE_STATIC_LIBS:BOOL=${IMPORT_PROJECT_STATIC}
  -DMZ_ZLIB:BOOL=@MZ_ZLIB@
  -DMZ_BZIP2:BOOL=@MZ_BZIP2@
  -DMZ_LZMA:BOOL=@MZ_LZMA@
  -DMZ_ZSTD:BOOL=@MZ_ZSTD@
  -DMZ_FETCH_LIBS:BOOL=OFF
)