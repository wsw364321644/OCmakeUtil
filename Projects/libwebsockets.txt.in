cmake_minimum_required(VERSION 3.24)
include(ExternalProject)
project(project_libwebsockets)

set(CMAKE_PREFIX_PATH @CMAKE_PREFIX_PATH@)
set(OCMAKEUTIL_PATH @OCMAKEUTIL_PATH@)
set(IMPORT_PROJECT_STATIC_CRT @IMPORT_PROJECT_STATIC_CRT@)
set(IMPORT_PROJECT_STATIC @IMPORT_PROJECT_STATIC@)
add_subdirectory(${OCMAKEUTIL_PATH} ${CMAKE_CURRENT_BINARY_DIR}/ocmakeutil)

ExternalProject_Add(libwebsockets
  GIT_REPOSITORY @GIT_REPOSITORY@
  GIT_TAG @IMPORT_PROJECT_TAG@
  CMAKE_ARGS
  -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
  CMAKE_CACHE_ARGS
  -DCMAKE_PREFIX_PATH:STRING=${CMAKE_PREFIX_PATH}
  -DLWS_MSVC_STATIC_RUNTIME:BOOL=${IMPORT_PROJECT_STATIC_CRT}
  -DLWS_WITHOUT_TESTAPPS:BOOL=TRUE
)
