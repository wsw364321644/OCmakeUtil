cmake_minimum_required(VERSION 3.24)
include(ExternalProject)
project(project_zlib)

set(CURL_STATIC_CRT @CURL_STATIC_CRT@)
set(BUILD_SHARED_LIBS @BUILD_SHARED_LIBS@)
ExternalProject_Add(curl
  GIT_REPOSITORY @GIT_REPOSITORY@
  GIT_TAG @CURL_TAG@
  CMAKE_ARGS
  -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
  CMAKE_CACHE_ARGS
  -DCMAKE_PREFIX_PATH:STRING=${CMAKE_PREFIX_PATH}
  -DCURL_STATIC_CRT:BOOL=${CURL_STATIC_CRT}
  -DBUILD_CURL_EXE:BOOL=OFF
  -DBUILD_SHARED_LIBS:BOOL=${BUILD_SHARED_LIBS}
  -DBUILD_TESTING:BOOL=OFF
  -DCURL_USE_SCHANNEL:BOOL=ON
  -DCURL_ZLIB:STRING=AUTO

  # DEPENDS zlib-build
)