cmake_minimum_required(VERSION 3.24)
include(FetchContent)
include(ExternalProject)
project(project_absl)

set(CMAKE_INSTALL_PREFIX @PROJECT_INSTALL_DIR@)
set(CMAKE_PREFIX_PATH @CMAKE_PREFIX_PATH@)
set(OCMAKEUTIL_PATH @OCMAKEUTIL_PATH@)
set(IMPORT_PROJECT_STATIC_CRT @IMPORT_PROJECT_STATIC_CRT@)
set(IMPORT_PROJECT_STATIC @IMPORT_PROJECT_STATIC@)
add_subdirectory(${OCMAKEUTIL_PATH} ${CMAKE_CURRENT_BINARY_DIR}/ocmakeutil)

if(IMPORT_PROJECT_STATIC)
  set(BUILD_SHARED_LIBS OFF)
else()
  set(BUILD_SHARED_LIBS ON)
endif()

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

set(ABSL_MSVC_STATIC_RUNTIME ${IMPORT_PROJECT_STATIC_CRT})
set(ABSL_BUILD_TESTING OFF)
set(ABSL_ENABLE_INSTALL ON)
set(ABSL_INTERNAL_AT_LEAST_CXX17 ON)
FetchContent_Declare(
  absl
  GIT_REPOSITORY @GIT_REPOSITORY@
  GIT_TAG @IMPORT_PROJECT_TAG@
)
FetchContent_MakeAvailable(absl)
FetchContent_GetProperties(absl)